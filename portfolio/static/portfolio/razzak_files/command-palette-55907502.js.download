System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-copy.js","./chunk-color-modes.js"],(function(){"use strict";var t,e,s,i,o,n,r,a,c,l,d,h,u,p,m,y,v,f,g,b,S;return{setters:[function(u){t=u._,e=u.j,s=u.c,i=u.b,o=u.a0,n=u.a1,r=u.t,a=u.m,c=u.g,l=u.i,d=u.n,h=u.ae},function(t){u=t.t,p=t.aH,m=t.aI,y=t.aJ,v=t.P},function(t){f=t.c},function(t){g=t.g,b=t.s,S=t.a}],execute:function(){let T=class CommandPaletteModeElement extends HTMLElement{constructor(){super(...arguments),this.scopeTypes=""}active(t,e){return this.scopeTypeMatch(t.type)&&this.modeMatch(e)}scopeTypeMatch(t){return!this.scopeTypes||this.scopeTypes&&JSON.parse(this.scopeTypes).includes(t)}modeMatch(t){return"*"===this.char||this.char===t}character(){return"*"===this.char?"":this.char}};t([e],T.prototype,"char",void 0),t([e],T.prototype,"placeholder",void 0),t([e],T.prototype,"scopeTypes",void 0),T=t([s],T);const I="*";let x=class CommandPaletteTipElement extends HTMLElement{constructor(){super(...arguments),this.type=I,this.mode=I,this.matchMode="",this.value=I,this.onEmpty=!1,this.onError=!1}connectedCallback(){this.hidden=!0}toggle(t,e=!1,s=!1){const i=this.valueMatch(t.text)&&this.scopeTypeMatch(t.scope.type)&&this.modeMatch(t.mode)&&this.showOnEmpty(e)&&this.showOnError(s);this.hidden=!i}valueMatch(t){return this.value===I||this.value===t}scopeTypeMatch(t){return this.type===I||this.type===t}modeMatch(t){if(""===this.matchMode)return this.mode===I||this.mode===t;{const e=new RegExp(this.matchMode);return null!==t.match(e)}}showOnEmpty(t){return!this.onEmpty||t}showOnError(t){return!this.onError||t}};var E;t([e],x.prototype,"type",void 0),t([e],x.prototype,"mode",void 0),t([e],x.prototype,"matchMode",void 0),t([e],x.prototype,"value",void 0),t([e],x.prototype,"onEmpty",void 0),t([e],x.prototype,"onError",void 0),x=t([s],x);let k=E=class CommandPaletteScopeElement extends HTMLElement{connectedCallback(){this.classList.add("mr-1","Truncate","d-inline-flex")}get lastToken(){return this.tokens[this.tokens.length-1]}get text(){return this.tokens.map((t=>t.text)).join("")}get id(){return this.lastToken?this.lastToken.id:E.emptyScope.id}get type(){return this.lastToken?this.lastToken.type:E.emptyScope.type}get scope(){return this.hasScope()?{text:this.text,type:this.type,id:this.id,tokens:this.tokens}:E.emptyScope}set scope(t){this.renderTokens(t.tokens)}renderTokens(t){this.clearScope();const e=t=>n`
        <command-palette-token
          data-text="${t.text}"
          data-id="${t.id}"
          data-type="${t.type}"
          data-value="${t.value}"
          data-targets="command-palette-scope.tokens"
          >${t.text}
        </command-palette-token>
      `;o(n`${t.map(e)}`,this),this.hidden=!this.hasScope()}removeToken(){this.lastToken&&(this.lastRemovedToken=this.lastToken,this.lastToken.remove(),this.renderTokens(this.tokens))}hasScope(){return this.tokens.length>0&&this.type&&this.id&&this.text}clearScope(){for(const t of this.tokens)t.remove()}};k.emptyScope={type:"",text:"",id:"",tokens:[]},t([i],k.prototype,"tokens",void 0),k=E=t([s],k);let w=class CommandPaletteTokenElement extends HTMLElement{constructor(){super(...arguments),this.type="",this.id="",this.text="",this.value=""}get isLast(){return null===this.nextElementSibling}connectedCallback(){this.classList.add("color-text-link","Truncate-text","Truncate-text--expandable","m-0"),this.style.maxWidth=this.isLast?"140px":"80px"}};t([e],w.prototype,"type",void 0),t([e],w.prototype,"id",void 0),t([e],w.prototype,"text",void 0),t([e],w.prototype,"value",void 0),w=t([s],w);let C=class CommandPaletteItemElement extends HTMLElement{constructor(){super(...arguments),this.titleNodes=[],this.rendered=!1,this.containerDataTarget="command-palette-item.containerElement",this.containerClasses="mx-2 px-2 rounded-2 d-flex flex-items-start no-underline border-0",this.containerStyle="padding-top: 10px; padding-bottom: 10px; cursor: pointer;"}renderOcticon(t){this.iconElement.innerHTML=t}renderAvatar(t,e){o(this.item.getAvatarTemplate(t,e),this.iconElement)}setItemAttributes(t){this.item=t,this.itemId=t.id,this.itemTitle=t.title,this.hint=t.getHint(),this.href=t.path,t.subtitle&&(this.subtitle=t.subtitle)}connectedCallback(){this.subtitle&&this.subtitleElement.removeAttribute("hidden"),this.titleNodes.length>0&&(this.titleElement.textContent="",this.titleElement.append(...this.titleNodes)),this.containerElement.addEventListener("click",(t=>{this.item.activate(this.commandPalette,t)}))}get commandPalette(){return this.closest("command-palette")}attributeChangedCallback(t,e,s){this.rendered&&("data-selected"===t?(this.setSelectionAppearance(),this.item.select(this)):"data-item-title"===t?this.titleElement.textContent=s:"data-subtitle"===t&&(this.subtitleElement.textContent=s))}setSelectionAppearance(){this.selected?(this.containerElement.classList.add("color-bg-tertiary"),this.hintText.hidden=!1):(this.containerElement.classList.remove("color-bg-tertiary"),this.hintText.hidden=!0)}renderLinkContainer(t){return n`
      <a
        data-target="${this.containerDataTarget}"
        href="${this.href}"
        class="${this.containerClasses}"
        data-skip-pjax
        style="${this.containerStyle}"
      >
        ${t}
      </a>
    `}renderSpanContainer(t){return n`
      <span data-target="${this.containerDataTarget}" class="${this.containerClasses}" style="${this.containerStyle}">
        ${t}
      </span>
    `}renderElementContent(){return n`
      <div
        data-target="command-palette-item.iconElement"
        class="mr-2 color-icon-tertiary d-flex flex-items-center"
        style="height: 24px;"
      ></div>

      <div class="flex-1 d-flex flex-column" style="line-height: 24px;">
        <span data-target="command-palette-item.titleElement" class="color-text-primary f5">${this.itemTitle}</span>
        <p data-target="command-palette-item.subtitleElement" class="color-text-tertiary f6 mb-0" hidden>
          ${this.subtitle}
        </p>
      </div>

      <div class="color-text-tertiary f5" style="line-height: 20px;">
        <span class="hide-sm" data-target="command-palette-item.hintText" style="line-height: 24px;" hidden
          >${this.hint}</span
        >
        <span
          class="hide-sm"
          data-target="command-palette-item.persistentHint"
          style="line-height: 24px;"
          hidden
        ></span>
      </div>
    `}renderElement(){const t=this.renderElementContent();o((()=>this.href?this.renderLinkContainer(t):this.renderSpanContainer(t))(),this),this.rendered=!0}};t([e],C.prototype,"itemId",void 0),t([e],C.prototype,"itemTitle",void 0),t([e],C.prototype,"subtitle",void 0),t([e],C.prototype,"selected",void 0),t([e],C.prototype,"score",void 0),t([r],C.prototype,"titleElement",void 0),t([r],C.prototype,"iconElement",void 0),t([r],C.prototype,"subtitleElement",void 0),t([r],C.prototype,"hintText",void 0),t([r],C.prototype,"persistentHint",void 0),t([r],C.prototype,"containerElement",void 0),C=t([s],C);var L,P=function(){for(var t=new Uint32Array(256),e=256;e--;){for(var s=e,i=8;i--;)s=1&s?3988292384^s>>>1:s>>>1;t[e]=s}return function(e){var s=-1;"string"==typeof e&&(e=function(t){for(var e=t.length,s=new Array(e),i=-1;++i<e;)s[i]=t.charCodeAt(i);return s}(e));for(var i=0,o=e.length;i<o;i++)s=s>>>8^t[255&s^e[i]];return(-1^s)>>>0}}(),q=function(t,e){var s,i=P(t);return e?((s=i)<0&&(s=4294967295+s+1),("0000000"+s.toString(16)).slice(-8)):i};function M(t,e){const s=document.querySelector("command-palette"),i={command_palette_session_id:s.sessionId,command_palette_scope:s.query.scope.type,command_palette_mode:s.getMode(),command_palette_title:"commands"===(null==e?void 0:e.group)?e.title:"",command_palette_position:null==e?void 0:e.position,command_palette_score:null==e?void 0:e.score,command_palette_group:null==e?void 0:e.group,command_palette_item_type:null==e?void 0:e.itemType};u(`command_palette_${t}`,i)}class Item{constructor(t){var e;this.position="",this.newTabOpened=!1,this.data=t,this.title=t.title,this.priority=t.priority,this.score=t.score,this.subtitle=t.subtitle,this.typeahead=t.typeahead,this.scope=t.scope,this.icon=t.icon,this.group=null!==(e=t.group)&&void 0!==e?e:Item.defaultGroupId}static register(t){this.itemClasses[t.itemType]=t}static get itemType(){return this.buildItemType(this.name)}static buildItemType(t){return t.replace(/([A-Z]($|[a-z]))/g,"_$1").replace(/(^_|_Item$)/g,"").toLowerCase()}static build(t){const e=this.itemClasses[t.action.type];if(e)return new e(t);throw new Error(`No item handler for ${t.action.type}`)}getAvatarTemplate(t,e){return n`<img src="${t}" alt="${e}" class="avatar avatar-1 avatar-small circle" />`}getHint(){return this.data.hint?n`<span class="hide-sm">${this.data.hint}</span>`:this.data.scope?n`<div class="hide-sm">
        <kbd class="hx_kbd">Enter</kbd>
        to jump to
        <kbd class="hx_kbd ml-1">Tab</kbd>
        to search
      </div>`:n`<span class="hide-sm">Jump to</span>`}get key(){return`${this.data.action.type}/${this.title}/${this.group}`}get id(){return this._id||(this._id=q(this.key).toString()),this._id}get path(){return this.data.action.path||""}get itemType(){return Item.buildItemType(this.constructor.name)}select(t){}deselect(t){}activate(t,e){M(this.activateTrackingEventType,this)}get activateTrackingEventType(){return"activate"}activateLinkBehavior(t,e,s){const i=this.fetchRenderedItem().containerElement;s&&i instanceof HTMLAnchorElement?(this.newTabOpened=!0,this.openLinkInNewTab(i)):(this.newTabOpened=!1,this.openLink(i))}openLinkInNewTab(t){const e=t.getAttribute("target");t.setAttribute("target","_blank"),t.click(),e?t.setAttribute("target",e):t.removeAttribute("target")}openLink(t){t.click()}copy(t){M("copy",this)}render(t,e){const s=new C;return s.setItemAttributes(this),s.renderElement(),t&&(s.selected=!0),e&&(s.titleNodes=this.emphasizeTextMatchingQuery(this.title,e)),s}emphasizeTextMatchingQuery(t,e){if(!p(e,t)){return[document.createTextNode(t)]}const s=[];let i=0;for(const n of m(e,t)){if(""!==t.slice(i,n)){const e=document.createTextNode(t.slice(i,n));s.push(e)}i=n+1;const e=document.createElement("strong");e.textContent=t[n],s.push(e)}const o=document.createTextNode(t.slice(i));return s.push(o),s}fetchRenderedItem(){return document.querySelector(`command-palette-item[data-item-id="${this.id}"]`)}copyToClipboardAndAnnounce(t,e){f(t);const s=this.fetchRenderedItem().hintText,i=s.textContent;s.classList.add("color-text-success"),s.textContent=null!=e?e:"Copied!",setTimeout((()=>{s.classList.remove("color-text-success"),s.textContent=i}),2e3)}calculateScore(t){const e=this.matchFields.map((e=>this.calculateScoreForField({field:e,queryText:t})));return Math.max(...e)}calculateScoreForField({field:t,queryText:e}){return p(e,t)?y(e,t):-1/0}get matchFields(){return this.data.match_fields?this.data.match_fields:[this.title]}autocomplete(t){const e=t.commandPaletteInput,s=this.typeahead;e.value=void 0!==s?e.overlay+s:e.overlay+this.title}clone(){const t=new Item(this.data);return t._id=this.id,t}}function j(t){Item.register(t)}Item.topGroupId="top",Item.defaultGroupId="default",Item.footerGroupId="footer",Item.helpGroupIds=["modes_help","filters_help"],Item.topGroupScoreThreshold=9,Item.itemClasses={},Item.defaultData={title:"",score:1,priority:1,action:{type:"",path:""},icon:{type:"octicon",id:"dash-color-icon-tertiary"},group:Item.defaultGroupId};let A=L=class CommandPaletteItemGroupElement extends HTMLElement{connectedCallback(){this.classList.add("py-2","border-top"),this.setAttribute("hidden","true"),this.renderElement("")}prepareForNewItems(){this.list.innerHTML="",this.setAttribute("hidden","true"),this.classList.contains("border-top")||this.classList.add("border-top")}hasItem(t){return this.list.querySelectorAll(`[data-item-id="${t.id}"]`).length>0}renderElement(t){o((()=>this.hasTitle?n`
          <div class="d-flex flex-justify-between my-2 px-3">
            <span data-target="command-palette-item-group.header" class="color-text-secondary text-bold f6 text-normal">
              ${this.groupTitle}
            </span>
            <span data-target="command-palette-item-group.header" class="color-text-secondary f6 text-normal">
              ${t?"":this.groupHint}
            </span>
          </div>
          <div
            role="listbox"
            class="list-style-none"
            data-target="command-palette-item-group.list"
            aria-label="${this.groupTitle} results"
          ></div>
        `:n`
          <div
            role="listbox"
            class="list-style-none"
            data-target="command-palette-item-group.list"
            aria-label="${this.groupTitle} results"
          ></div>
        `)(),this)}push(t){this.removeAttribute("hidden"),this.topGroup&&this.atLimit?t.itemId!==this.firstItem.itemId&&this.replaceTopGroupItem(t):this.list.append(t)}replaceTopGroupItem(t){this.list.replaceChild(t,this.firstItem)}groupLimitForScope(){const t=this.closest("command-palette");if(t){const e=t.query.scope.type;return JSON.parse(this.groupLimits)[e]}}get limit(){const t=this.groupLimitForScope();return this.topGroup?1:this.isModeActive()?50:t||L.defaultGroupLimit}isModeActive(){const t=this.closest("command-palette");return!!t&&t.getMode()}get atLimit(){return this.list.children.length>=this.limit}get topGroup(){return this.groupId===Item.topGroupId}get hasTitle(){return this.groupId!==Item.footerGroupId}get itemNodes(){return this.list.querySelectorAll("command-palette-item")}get firstItem(){return this.itemNodes[0]}get lastItem(){return this.itemNodes[this.itemNodes.length-1]}};A.defaultGroupLimit=5,t([e],A.prototype,"groupTitle",void 0),t([e],A.prototype,"groupHint",void 0),t([e],A.prototype,"groupId",void 0),t([e],A.prototype,"groupLimits",void 0),t([r],A.prototype,"list",void 0),t([r],A.prototype,"header",void 0),A=L=t([s],A);let _=class CommandPaletteItemStackElement extends HTMLElement{constructor(){super(...arguments),this.topGroupThreshold=6.5,this.maxHeightVh=65,this.showDebugInfo=!1,this.octicons={},this.tryDefaultSelection=!1,this.eventListenersBound=!1,this.currentHeight=0,this.items={},this.history={}}connectedCallback(){this.classList.add("rounded-bottom-2")}get selectedItem(){return this.findSelectedElement()}set selectedItem(t){const e=this.findSelectedElement();e&&(e.selected=!1),t&&(t.selected=!0,this.selectedItemChanged(t.item))}get selectedItemIsTopResult(){var t;const e=this.findGroup(Item.topGroupId);return!!(e&&e.itemNodes.length>0)&&e.firstItem.itemId===(null===(t=this.selectedItem)||void 0===t?void 0:t.itemId)}findSelectedElement(){return this.querySelector('command-palette-item[data-selected="true"]')}navigate(t){var e,s;this.tryDefaultSelection=!1;const i=t>0,o={behavior:"smooth",block:"nearest"};if(this.selectedItem){let n;if(n=i?null===(e=this.selectedItem)||void 0===e?void 0:e.nextElementSibling:null===(s=this.selectedItem)||void 0===s?void 0:s.previousElementSibling,n)this.selectedItem=n,this.selectedItem.scrollIntoView(o);else if(this.selectedItem){const e=this.visibleGroups[this.calculateIndex(t)];e.scrollIntoView(o),this.selectedItem=i?e.firstItem:e.lastItem}}else this.selectedItem=this.firstItem}calculateIndex(t){let e=this.visibleGroups.findIndex((t=>{var e;return t.groupId===(null===(e=this.selectedItem)||void 0===e?void 0:e.item.group)}));this.findGroup(Item.topGroupId).firstItem===this.selectedItem&&(e=0);const s=e+t,i=this.visibleGroups.length;return(s%i+i)%i}historyItems(t){return this.history[t]||(this.history[t]={}),this.history[t]}addItemToHistory(t,e,s){const i=this.historyItems(e),o=s.calculateScore(t);i[s.id]=o}addItems(t,e,s=!1){for(const i of e)this.addItemToHistory(t.text,t.path,i),this.items[i.id]=i,s&&this.prefillHistory(i,t);a(this.renderCurrentItems.bind(this),this.debounceWait)()}prefillHistory(t,e){for(const s of t.matchFields){const i=15,o=Math.min(s.length,i);for(let n=0;n<=o;n++){const i=s.slice(0,n);this.addItemToHistory(i,e.buildPath(e,i),t)}}}get debounceWait(){return 16}renderCurrentItems(){const t=this.getQuery().immutableCopy();this.currentPath!==t.path&&this.reset();const e=[...this.currentItems];if(t.isPresent()&&e.length>0){const s=this.findGroup(Item.topGroupId);for(let i=0;i<s.limit;i++){const s=e[i],o=s.calculateScore(t.queryText),n=s.priority+o;s&&n>this.topGroupThreshold&&this.renderItem(e.shift(),Item.topGroupId)}}this.renderItems(e),this.updateSelectedItem(),this.itemsUpdated()}itemsUpdated(){const t=new CustomEvent("itemsUpdated",{cancelable:!0,detail:{items:this.currentItems,queryPath:this.getQuery().immutableCopy().path}});return this.dispatchEvent(t)}selectedItemChanged(t){const e=new CustomEvent("selectedItemChanged",{cancelable:!0,detail:{item:t,isDefaultSelection:this.tryDefaultSelection}});return this.dispatchEvent(e)}renderItems(t){for(const e of t)this.renderItem(e,e.group);this.setGroupBorders(),this.setMaxHeight()}get maximumHeight(){const t=.5*window.innerHeight;return Math.min(t,475)}get innerContentHeight(){let t=0;for(const e of this.children){const s=e,i=getComputedStyle(s),o=parseInt(i.marginTop.replace("px",""),10),n=parseInt(i.marginBottom.replace("px",""),10),r=s.offsetHeight+o+n;s.offsetHeight>0&&(t+=r)}return t}setMaxHeight(){const t=.6*this.maximumHeight,e=Math.round(Math.min(this.maximumHeight,this.innerContentHeight));Math.abs(this.currentHeight-e)>t?this.classList.add("no-transition"):this.classList.remove("no-transition"),this.setAttribute("style",`max-height:${e}px; min-height:${e}px;`),this.currentHeight=e}setGroupBorders(){if(this.visibleGroups.length>0){this.visibleGroups[0].classList.remove("border-top");for(const t of this.visibleGroups){0===this.visibleGroups.indexOf(t)?(t.classList.remove("border-top"),t.header&&(t.classList.remove("py-2"),t.classList.add("mb-2","mt-3"))):(t.classList.add("border-top"),t.header&&(t.classList.remove("mb-2","mt-3"),t.classList.add("py-2")))}}}reset(){this.tryDefaultSelection=!0,this.currentPath=this.getQuery().immutableCopy().path;for(const t of this.groups)t.prepareForNewItems()}renderItem(t,e){const s=this.findGroup(e);if((s.hasItem(t)||s.atLimit||this.topGroup.hasItem(t))&&!s.topGroup)return;const i=t.render(!1,this.getQuery().immutableCopy().queryText);this.showDebugInfo&&(i.score=t.score),s.push(i);if(i.containerElement){const e=s.list.children.length.toString();t.position=e}if(t.icon)if("octicon"===t.icon.type){const e=this.octicons[t.icon.id],s=this.octicons["dash-color-icon-tertiary"];i.renderOcticon(e||s)}else"avatar"===t.icon.type&&i.renderAvatar(t.icon.url,t.icon.alt);else i.iconElement.hidden=!0;i.addEventListener("mousemove",(t=>{(0!==t.movementX||0!==t.movementY)&&this.selectedItem!==i&&(this.tryDefaultSelection=!1,this.selectedItem=i)}))}findGroup(t){return this.groups.find((e=>e.groupId===t))}get topGroup(){return this.findGroup(Item.topGroupId)}get groupIds(){return this.groups.map((t=>t.groupId))}updateSelectedItem(){this.isSelectedItemInvalid()&&this.clearSelection(),this.setDefaultSelection()&&(this.selectedItem=this.firstItem)}setDefaultSelection(){const t=this.getQuery().hasScope()||this.getQuery().isPresent();return this.tryDefaultSelection&&t}noItemSelected(){return!this.selectedItem||this.isSelectedItemInvalid()}isSelectedItemInvalid(){return!this.currentItems.some((t=>{var e;return t.id===(null===(e=this.selectedItem)||void 0===e?void 0:e.itemId)}))}isEmpty(){return!this.currentItems||0===this.currentItems.length}clearSelection(){this.selectedItem=void 0}clear(){this.history={},this.items={},this.reset()}get visibleGroups(){return this.groups.filter((t=>!t.hidden))}get firstItem(){const t=this.visibleGroups;if(t.length>0)return t[0].querySelector("command-palette-item")}get currentItems(){const t=this.getQuery().immutableCopy(),e=this.historyItems(t.path),s=Object.entries(e).map((([t,e])=>{const s=this.items[t];return s.score=e,s}));return s?t.isBlank()?s.sort(((t,e)=>e.priority-t.priority)):s.sort(((t,e)=>e.score-t.score||e.priority-t.priority)):[]}disconnectedCallback(){this.unbindListeners()}bindListeners(){this.eventListenersBound||(window.addEventListener("resize",this.setMaxHeight.bind(this)),this.eventListenersBound=!0)}unbindListeners(){window.removeEventListener("resize",this.setMaxHeight.bind(this)),this.eventListenersBound=!1}};var $;t([e],_.prototype,"topGroupThreshold",void 0),t([e],_.prototype,"maxHeightVh",void 0),t([e],_.prototype,"showDebugInfo",void 0),t([i],_.prototype,"groups",void 0),_=t([s],_);let H=$=class CommandPaletteProviderElement extends HTMLElement{constructor(){super(...arguments),this.mode="",this.src="",this.type="remote",this.debounce=0,this.scopeTypes=""}static registerProvider(t){const e=t.name.replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/(^-|-Provider$)/g,"").toLowerCase();this.providerClasses[e]=t}static getProvider(t){const e=this.providerClasses[t];if(e)return e;throw new Error(`${t} provider not found`)}get provider(){if(!this._provider){const t=$.getProvider(this.type);this._provider=new t(this)}return this._provider}get octicons(){return this.provider.octicons}async prefetch(t){await this.provider.prefetch(t)}async fetch(t,e){return this.lastFetchQuery=t,await R(this.debounce),this.lastFetchQuery!==t?{results:[]}:this.provider.fetch(t,e)}isWildcardMode(){return"*"===this.mode}appliesTo(t){return(this.mode===t.mode||this.isWildcardMode())&&B(t,this.scopeTypes)}};function D(t){H.registerProvider(t)}function B(t,e){return!e||e&&JSON.parse(e).includes(t.scope.type)}H.providerClasses={},t([e],H.prototype,"mode",void 0),t([e],H.prototype,"src",void 0),t([e],H.prototype,"type",void 0),t([e],H.prototype,"debounce",void 0),t([e],H.prototype,"scopeTypes",void 0),H=$=t([s],H);const R=t=>new Promise((e=>setTimeout(e,t)));var W;let G=W=class HelpItem extends Item{static from({title:t,group:e,index:s,prefix:i,persistentHint:o}){return new W({title:t,typeahead:"",priority:-10-s,score:-10,group:e,action:{type:"help",description:"",prefix:i},persistentHint:null!=o?o:""})}getHint(){return n``}render(t,e){const s=super.render(t,void 0),i=document.createElement("span");return i.innerHTML=this.title,s.titleNodes=[i],this.data.persistentHint&&(s.persistentHint.innerHTML=this.data.persistentHint,s.persistentHint.hidden=!1),s}activate(t,e){t.commandPaletteInput.value=this.action.prefix+t.getTextWithoutMode()}copy(){}autocomplete(t){t.commandPaletteInput.value=this.action.prefix+t.getTextWithoutMode()}calculateScore(t){return 0}get action(){return this.data.action}};G=W=t([j],G);let F=class CommandPaletteHelpElement extends HTMLElement{connectedCallback(){this.hidden=!0}show(t){return this.isEnabledScopeType(t)}isEnabledScopeType(t){return!this.scopeTypes||this.scopeTypes&&JSON.parse(this.scopeTypes).includes(t.scope.type)}toItem(t){const e={group:this.group,title:this.titleElement.innerHTML,index:t};return this.prefix&&(e.prefix=this.prefix),this.hintElement.textContent&&(e.persistentHint=this.hintElement.innerHTML),G.from(e)}};t([e],F.prototype,"group",void 0),t([e],F.prototype,"prefix",void 0),t([e],F.prototype,"scopeTypes",void 0),t([r],F.prototype,"titleElement",void 0),t([r],F.prototype,"hintElement",void 0),F=t([s],F);let N=class FetchItem extends Item{activate(t){super.activate(t);const e=new URL(this.action.path,window.location.origin),s=new FormData;for(const i in this.action.payload)s.append(i,this.action.payload[i]);fetch(e.toString(),{method:this.action.method,body:s,headers:Object.assign({"X-Requested-With":"XMLHttpRequest"},this.action.headers)})}get activateTrackingEventType(){return"fetch_executed"}get action(){return this.data.action}get key(){return`${super.key}/${this.action.method}/${this.action.path}`}};var O;N.actionType="fetch",N=t([j],N);let U=O=class ColorModeItem extends N{static from(t,e){const s=document.querySelector("command-palette").querySelector(".js-color-mode-csrf").value,i=document.querySelector("command-palette").querySelector(".js-color-mode-path").value,o=g("light")||"";return new O({title:t,priority:1,score:1,group:"commands",action:{type:"color_mode_command",description:"Switch to theme",theme:e,previousTheme:o,path:i,method:"PUT",payload:{color_mode:"auto",light_theme:e},headers:{"Scoped-CSRF-Token":s}},icon:{type:"octicon",id:e.match("light")?"sun-color-icon-tertiary":"moon-color-icon-tertiary"}})}render(t,e){const s=super.render(t,e);if(this.action.theme===this.action.previousTheme){const t=s.titleElement,e=t.textContent;c(l`${e} <span class="ml-2 Label text-small">Active</span>`,t)}return s}select(){b(this.action.theme,"light")}deselect(){b(this.action.previousTheme,"light")}activate(t){super.activate(t),this.action.previousTheme=this.action.payload.light_theme,t.popSubmenu(),t.manualToggle(!1)}get activateTrackingEventType(){return"command_executed"}get action(){return this.data.action}get key(){return`${super.key}/${this.action.theme}`}};U=O=t([j],U);let Q=class CustomCommandItem extends Item{get action(){return this.data.action}get activateTrackingEventType(){return"command_executed"}activate(t){super.activate(t),t.runCommand(this.title,this.action.command.id)}};Q=t([j],Q);class PaletteToRunnerSwitchboard extends class Switchboard{constructor(t,e=window){this.replyListeners={},this.routes={},this.receiver=t,this.sender=e,this.sender.onmessage=this.receive.bind(this)}addListener(t,e){this.routes[t]=e}respond(t,e){this.postMessage({id:t,type:"response",payload:e})}isReceiverWebWorker(){return this.receiver instanceof Worker}postMessage(t){"undefined"==typeof Window?self.postMessage(t):this.isReceiverWebWorker()?this.receiver.postMessage(t):this.receiver.postMessage(t,"*")}async listenForReply(t){let e=()=>{};const s=new Promise((t=>{e=t}));return this.replyListeners[t]=e,s}generateId(t){return`${t}-${(new Date).getTime().toString()}-${Math.random().toString()}`}async post(t,e){const s=this.generateId(t);return this.postMessage({id:s,type:t,payload:e}),this.listenForReply(s)}async receive(t){const{id:e,type:s}=t.data;"response"===s?this.replyListeners[e](t.data):this.routes[s]&&this.routes[s](t.data)}forward(t,...e){for(const s of e)this.addListener(s,(async e=>{const i=await t.post(s,e.payload);this.respond(e.id,i.payload)}))}}{static setup(){const t=document.querySelector("iframe.js-command-palette-commands"),e=new PaletteToRunnerSwitchboard(t.contentWindow);return e.addListener("graphql",(async t=>{const s=t.payload,i=await e.fetchGraphql(s.query,s.variables);e.respond(t.id,i)})),e.addListener("flash",(t=>{const s=t.payload;e.displayFlash(s.type,s.message)})),e.addListener("confirm",(t=>{const s=t.payload;e.respond(t.id,window.confirm(s.message))})),e.addListener("navigate",(t=>{const s=t.payload;e.openLink(s.path,s.options)})),e.addListener("copyToClipboard",(async t=>{const s=t.payload;try{await f(s.text),e.respond(t.id,!0)}catch(i){e.respond(t.id,!1)}})),e}openLink(t,e){if(this.parseHref(t).origin!==window.origin)this.displayFlash("error",`You can only navigate within ${window.origin}.`);else if(null==e?void 0:e.openInNewTab){const e=document.createElement("a");e.href=t,e.target="_blank",e.click()}else window.location.href=t}parseHref(t){try{return new URL(t,void 0)}catch(e){return new URL(t,window.origin)}}async runCommand(t){return this.post("runCommand",t)}async fetchGraphql(t,e){const s=new URL("/command_palette/graphql",window.origin),i=document.querySelector(".js-graphql-csrf").value;return(await fetch(s.toString(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","Scoped-CSRF-Token":i},body:JSON.stringify({query:t,variables:e})})).json()}}class Query{constructor(t,e,{scope:s,subjectId:i,subjectType:o,returnTo:n}={}){this.queryText=t,this.queryMode=e,this.scope=null!=s?s:k.emptyScope,this.subjectId=i,this.subjectType=o,this.returnTo=n}get text(){return this.queryText}get mode(){return this.queryMode}get path(){return this.buildPath(this)}buildPath(t,e=t.text){return`scope:${t.scope.type}-${t.scope.id}/mode:${t.mode}/query:${e}`}clearScope(){this.scope=k.emptyScope}hasScope(){return this.scope.id!==k.emptyScope.id}isBlank(){return 0===this.text.trim().length}isPresent(){return!this.isBlank()}immutableCopy(){const t=this.text,e=this.mode,s=Object.assign({},this.scope);return new Query(t,e,{scope:s,subjectId:this.subjectId,subjectType:this.subjectType,returnTo:this.returnTo})}hasSameScope(t){return this.scope.id===t.scope.id}params(){const t=new URLSearchParams;return this.isPresent()&&t.set("q",this.text),this.hasScope()&&t.set("scope",this.scope.id),this.mode&&t.set("mode",this.mode),this.returnTo&&t.set("return_to",this.returnTo),this.subjectId&&t.set("subject",this.subjectId),t}}const z=()=>navigator.platform.match(/Mac/),K=z()?"metaKey":"ctrlKey",J=t=>t instanceof KeyboardEvent&&t[K];let X=class CommandPalette extends HTMLElement{constructor(){super(...arguments),this.activated=!1,this.error=!1,this.query=new Query("",""),this.requestsInProgress=[],this.setupComplete=!1,this.sessionId="",this.returnTo="",this.userId=""}setup(){this.commandSwitchboard=PaletteToRunnerSwitchboard.setup(),this.commandSwitchboard.displayFlash=(t,e)=>{this.displayFlash(t,e)},this.modes=Array.from(this.querySelectorAll("command-palette-mode")),this.defaultMode=this.querySelector(".js-command-palette-default-mode"),this.commandPaletteInput=this.querySelector("command-palette-input"),this.groups=this.querySelectorAll("command-palette-item-group"),this.itemStackElement=this.querySelector("command-palette-item-stack"),this.itemStackElement.getQuery=()=>this.query,this.itemStackElement.addEventListener("selectedItemChanged",(t=>{if(t instanceof CustomEvent){const e=t.detail.item,s=t.detail.isDefaultSelection;this.updateTypeahead(e,s)}})),this.octicons={};const t=this.querySelector(".js-command-local-provider-octicons");if(t){const e=Array.from(t.children).map((t=>({id:t.getAttribute("data-local-provider-octicon-id"),svg:t.innerHTML})));this.cacheIcons(e)}this.commandPaletteInput.addEventListener("command-palette-input",this.onInput.bind(this)),this.commandPaletteInput.addEventListener("command-palette-select",this.onSelect.bind(this)),this.commandPaletteInput.addEventListener("command-palette-descope",this.onDescope.bind(this)),this.commandPaletteInput.addEventListener("command-palette-cleared",this.onClear.bind(this)),this.commandPaletteInput.addEventListener("command-palette-submenu-back",(()=>{this.popSubmenu()})),this.itemStackElement.addEventListener("itemsUpdated",this.itemsUpdated.bind(this)),document.addEventListener("pjax:end",this.pjaxReset.bind(this)),this.addEventListener("keydown",this.onKeydown.bind(this)),this.defaultOpen&&(this.manualToggle(!0),this.clearReturnToParams()),this.setupComplete=!0}connectedCallback(){this.setupComplete||this.setup()}activate(){if(this.sessionId=this.generateSessionId(),this.commandPaletteInput.resetScopeIfNeeded(),this.commandPaletteInput.focus(),this.setActiveModeElement(),this.setQuery(),this.toggleTips(),this.prefetchProviderData(),this.updateOverlay(),this.itemStackElement.bindListeners(),this.commandPaletteInput.hasScope()){const t=new Query(this.query.queryText,this.query.queryMode,{subjectId:this.query.subjectId,subjectType:this.query.subjectType,returnTo:this.query.returnTo});this.prefetchProviderData(t)}this.activated=!0,M("session_initiated")}deactivate(){this.activated=!1,this.itemStackElement.clearSelection(),this.itemStackElement.unbindListeners();const t=document.querySelector(".js-command-palette-dialog summary");this.previouslyActiveElement?(this.previouslyActiveElement.focus(),this.previouslyActiveElement!==document.activeElement&&t.focus()):t.focus(),M("session_terminated")}generateSessionId(){return q(`${Date.now()}_${this.userId}_${this.query.path}`).toString()}manualToggle(t){const e=this.closest("details");t?e.open=!0:e.removeAttribute("open")}dismiss(){this.manualToggle(!1)}get subjectId(){var t;return(null===(t=this.pjaxMeta)||void 0===t?void 0:t.getAttribute("data-subject-id"))||""}get subjectType(){var t;return(null===(t=this.pjaxMeta)||void 0===t?void 0:t.getAttribute("data-subject-type"))||""}get pjaxMeta(){return document.querySelector(".js-command-palette-pjax-meta-data")}pjaxReset(){this.activated=!1,this.commandPaletteInput.value="",this.itemStackElement.clear()}onInput(){this.commandPaletteInput.typeahead="",this.setActiveModeElement(),this.setQuery(),this.activated&&this.fetchProviderData(),this.itemStackElement.updateSelectedItem(),this.toggleTips(),this.updateOverlay()}updateOverlay(){const t=this.getMode();this.commandPaletteInput.overlay=t;for(const e of this.groups)e.renderElement(t);if(t&&""===this.getTextWithoutMode()){const t=this.getModeElement().placeholder||"";this.commandPaletteInput.showModePlaceholder(t)}else this.commandPaletteInput.showModePlaceholder("")}itemsUpdated(t){if(!(t instanceof CustomEvent))return;const e=t.detail.items.filter((t=>t.group!==Item.footerGroupId)),s=e.filter((t=>!Item.helpGroupIds.includes(t.group))),i=e.length>s.length,o=this.finishedLoading&&0===s.length&&this.activated;s.length>0?this.toggleEmptyState(!1,i):o&&(this.toggleEmptyState(!0,i),this.toggleTips()),this.toggleErrorTips()}setActiveModeElement(){const t=this.commandPaletteInput.value.substring(0,1),e=this.modes.filter((e=>e.active(this.query.scope,t))).find((e=>e.character()===t));this.activeMode=e||this.defaultMode}setQuery(){this.query=new Query(this.getTextWithoutMode().trimStart(),this.getMode(),{scope:this.commandPaletteInput.scope,subjectId:this.subjectId,subjectType:this.subjectType,returnTo:this.returnTo})}getModeElement(){return this.activeMode}getMode(){return this.getModeElement().character()}getTextWithoutMode(){if(!this.commandPaletteInput)return"";const t=this.commandPaletteInput.value,e=this.getMode();return e&&t.startsWith(e)?t.substring(1):t}onSelect(t){const e=this.itemStackElement.selectedItem;e?e.item.scope?this.setScope(e.item.scope):e.item.autocomplete(this):t.preventDefault()}setScope(t){this.itemStackElement.clearSelection(),this.commandPaletteInput.value="",t&&(this.commandPaletteInput.scope=t),this.setQueryScope(),this.toggleTips(),this.prefetchProviderData()}onDescope(){if(this.commandPaletteInput.hasScope()){const t=this.commandPaletteInput.value;this.commandPaletteInput.removeToken(),this.setScope(),this.commandPaletteInput.setRemovedTokenAndSelect(t)}}onClear(){this.commandPaletteInput.clearScope(),this.setScope()}onKeydown(t){var e;"Enter"===t.key&&this.itemStackElement.selectedItem?(null===(e=this.itemStackElement.selectedItem)||void 0===e||e.item.activate(this,t),t.preventDefault(),t.stopPropagation()):"ArrowDown"===t.key?(this.itemStackElement.navigate(1),t.preventDefault(),t.stopPropagation()):"ArrowUp"===t.key?(this.itemStackElement.navigate(-1),t.preventDefault(),t.stopPropagation()):this.isCopyEvent(t)&&this.itemStackElement.selectedItem&&(this.itemStackElement.selectedItem.item.copy(this),t.preventDefault(),t.stopPropagation())}toggleTips(){for(const t of this.modeTips)t.toggle(this.query);this.finishedLoading&&this.itemStackElement.setMaxHeight()}toggleEmptyState(t,e){for(const s of this.emptyStateElements)s.toggle(this.query,t);if(!e&&t){const t=this.providerElements.find((t=>"help"===t.type));this.fetchProviderData([t],{isEmpty:!0})}this.finishedLoading&&this.itemStackElement.setMaxHeight()}toggleErrorTips(){for(const t of this.errorStateTips)t.toggle(this.query,!1,this.error)}updateTypeahead(t,e=!1){var s,i;""!==this.getTextWithoutMode()||t&&!e?t&&(this.commandPaletteInput.typeahead=null!==(i=null!==(s=t.typeahead)&&void 0!==s?s:t.title)&&void 0!==i?i:""):this.commandPaletteInput.typeahead=""}isCopyEvent(t){return!this.commandPaletteInput.textSelected()&&(z()?t.metaKey&&"c"===t.key:t.ctrlKey&&"c"===t.key)}setQueryScope(){this.query.scope=this.commandPaletteInput.scope}async prefetchProviderData(t=this.query){await Promise.all(Array.from(this.providerElements).map((async e=>{B(t,e.scopeTypes)&&(await e.prefetch(t.immutableCopy()),this.cacheIcons(e.octicons),await this.fetchProviderData([e],{prefillItemStack:!0}))})))}async fetchProviderData(t,{prefillItemStack:e,isEmpty:s}={prefillItemStack:!1,isEmpty:!1}){var i;const o=null!==(i=null!=t?t:this.submenuProviderElements)&&void 0!==i?i:this.providerElements;this.error=!1,await this.fetchWithSpinner(o.map((async t=>{if(!t.appliesTo(this.query))return;const i=this.query.immutableCopy(),o=await t.fetch(i,null!=s&&s);o&&(o.error&&(this.error=!0,this.toggleErrorTips()),o.octicons&&this.cacheIcons(o.octicons)),this.itemStackElement.addItems(i,o.results,null!=e&&e)})))}async fetchWithSpinner(t){this.requestsInProgress.push(t),this.commandPaletteInput.loading=!0,await Promise.all(t),this.requestsInProgress.splice(this.requestsInProgress.indexOf(t),1),this.commandPaletteInput.loading=this.requestsInProgress.length>0}get providerElements(){const t=this.querySelectorAll("command-palette-provider");return Array.from(t)}clearProviderCaches(){for(const t of this.providerElements)t.provider.clearCache()}get submenuProviderElements(){if(this.activeSubmenuElement)return Array.from(this.activeSubmenuElement.querySelectorAll("command-palette-provider"))}get submenuElements(){return this.querySelectorAll("command-palette-submenu")}get activeSubmenuElement(){const t=this.submenuElements;return t[t.length-1]}get tipElements(){const t=this.querySelectorAll("command-palette-tip");return Array.from(t)}get modeTips(){return this.tipElements.filter((t=>!t.onEmpty&&!t.onError))}get emptyStateElements(){return this.tipElements.filter((t=>t.onEmpty))}get errorStateTips(){return this.tipElements.filter((t=>t.onError))}get finishedLoading(){return 0===this.requestsInProgress.length}pushSubmenu(t){this.appendChild(t),this.updateSubmenu()}popSubmenu(){this.activeSubmenuElement.remove(),this.updateSubmenu()}updateSubmenu(){if(this.activeSubmenuElement){const t=this.activeSubmenuElement;this.commandPaletteInput.placeholder=t.placeholder,this.commandPaletteInput.setSubmenuTile(t.title,this.octicons[t.iconId]),this.query.scope={id:`submenu:${t.title}`,text:"",type:"submenu",tokens:[]}}else this.commandPaletteInput.placeholder=this.placeholder,this.itemStackElement.clearSelection(),this.commandPaletteInput.clearSubmenuTile(),this.query.clearScope();this.commandPaletteInput.focus(),this.commandPaletteInput.value=""}get placeholder(){return this.getAttribute("placeholder")||""}get defaultOpen(){return null!==this.getAttribute("data-default-open")}clearReturnToParams(){const t=new URLSearchParams(location.search);t.delete("command_palette_open"),t.delete("command_query"),t.delete("command_mode"),t.delete("clear_command_scope"),history.replaceState(null,"",`?${t}${location.hash}`)}cacheIcons(t){for(const e of t)this.itemStackElement.octicons[e.id]=e.svg}async runCommand(t,e){const s={command:{name:t,id:e},context:{subject:{id:this.subjectId,type:this.subjectType}}};this.dismiss(),this.commandPaletteInput.value="",this.clearProviderCaches(),this.itemStackElement.clear(),await this.commandSwitchboard.runCommand(s)}displayFlash(t,e,s=!1,i=5e3){const o=document.querySelector(".js-command-palette-toasts");if(!o)return;const n=o.querySelectorAll(".Toast");for(const c of n)c.hidden=!0;const r=o.querySelector(`.Toast.Toast--${t}`);if(!r)return;const a=r.querySelector(".Toast-content");s?a.innerHTML=e:a.textContent=e,r.hidden=!1,setTimeout((()=>{r.hidden=!0}),i)}};X.tagName="command-palette",t([e],X.prototype,"returnTo",void 0),t([e],X.prototype,"userId",void 0),X=t([s],X);var V,Y=X;let Z=V=class JumpToItem extends Item{static from({title:t,icon:e,path:s,group:i}){return new V({title:t,typeahead:t,priority:1,score:1,group:i,action:{type:"jump_to",description:"",path:s},icon:{type:"octicon",id:e}})}render(t,e){return super.render(t,e)}activate(t,e){e instanceof PointerEvent?super.activate(t,e):e instanceof KeyboardEvent&&this.activateLinkBehavior(t,e,J(e))}get activateTrackingEventType(){return this.newTabOpened?"jump_to_new_tab":"jump_to"}copy(){super.copy();const t=new URL(this.action.path,window.location.origin);this.copyToClipboardAndAnnounce(t.toString())}get key(){return`${super.key}/${this.action.path}`}get action(){return this.data.action}};Z=V=t([j],Z);let tt=class JumpToOrgItem extends Z{getAvatarTemplate(t,e){return n`<img src="${t}" alt="${e}" class="avatar avatar-1 avatar-small" />`}};tt=t([j],tt);let et=class JumpToTeamItem extends Z{getAvatarTemplate(t,e){return n`<img src="${t}" alt="${e}" class="avatar avatar-1" />`}};var st;et=t([j],et);let it=st=class SearchLinkItem extends Z{constructor(t){super(t),this.titleScope=t.titleScope}static create(t){let e,s;if("repository"===t.scope.type)e=`in ${t.scope.text}`,s=`/${t.scope.text}/search?q=${t.text}`;else if("owner"===t.scope.type){const i=`org:${t.scope.text} ${t.text}`;e=`in ${t.scope.text}`,s=`/search?q=${i}`}else e="across all of GitHub",s=`/search?q=${t.text}`;return new st({title:`Search ${t.text}${e}`,typeahead:"",priority:-10,score:-10,group:Item.footerGroupId,action:{type:"jump_to",description:"",path:s},icon:{type:"octicon",id:"search-color-icon-tertiary"},titleScope:e})}render(t,e){const s=super.render(t,void 0);if(e){const t=[];t.push(document.createTextNode("Search"));const i=document.createElement("strong");i.textContent=` '${e}' `,t.push(i),t.push(document.createTextNode(this.titleScope)),s.titleNodes=t}return s}autocomplete(t){}calculateScore(t){return 0}};it=st=t([j],it);class Provider{constructor(t){this.octicons=[],this.element=t}static get providerType(){return typeof this}async prefetch(t){}clearCache(){}async fetch(t,e=!1){return{results:[]}}get src(){return this.element.src}async fetchSrc(t,e=""){var s;const i=new URL(this.src,window.location.origin),o=t.params();e&&o.set("mode",e),i.search=o.toString();const n=await fetch(i.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(n.ok){const t=await n.json();return{results:(null===(s=t.results)||void 0===s?void 0:s.map((t=>Item.build(t))))||[],octicons:t.octicons}}return{error:!0,results:[]}}get commandPalette(){return this.element.closest("command-palette")}fuzzyFilter(t,e,s=0){const i=[];for(const o of t){o.calculateScore(e.text)>s&&i.push(o)}return i}empty(){return{results:[]}}}let ot=class StaticProvider extends Provider{constructor(){super(...arguments),this.items=[]}async fetch(t,e=!1){return t.isBlank()?{results:this.items.slice(0,10)}:{results:this.fuzzyFilter(this.items,t)}}};ot=t([D],ot);let nt=class CommandPaletteSubmenuElement extends HTMLElement{constructor(){super(...arguments),this.items=[]}static buildElement(t){const e=document.createElement("command-palette-submenu");e.title=t.title,e.iconId=t.iconId,e.placeholder=t.placeholder;for(const s of t.providers){const t=document.createElement("command-palette-provider");t.type=s.type,s.src&&(t.src=s.src),s.debounce&&(t.debounce=s.debounce),t.provider instanceof ot&&s.items&&(t.provider.items=s.items),e.appendChild(t)}return e}};t([e],nt.prototype,"title",void 0),t([e],nt.prototype,"iconId",void 0),t([e],nt.prototype,"placeholder",void 0),nt=t([s],nt);let rt=class SubmenuItem extends Item{render(t,e){return super.render(t,e)}activate(t){super.activate(t);const e=nt.buildElement(this.action);t.pushSubmenu(e)}get activateTrackingEventType(){return"submenu_selected"}get key(){return`${super.key}/${JSON.stringify(this.action)}`}get action(){return this.data.action}};rt.actionType="submenu",rt=t([j],rt);let at=class AccessPolicyItem extends Item{render(t){return super.render(t,this.data.typeahead)}activate(t,e){e instanceof PointerEvent?super.activate(t,e):e instanceof KeyboardEvent&&this.activateLinkBehavior(t,e,J(e))}get activateTrackingEventType(){return"access_policy_executed"}get action(){return this.data.action}get key(){return this.data.title}getHint(){return n``}};at=t([j],at);let ct=class ColorModesProvider extends Provider{async fetch(t,e=!1){const s="Switch color mode",i=new rt({title:s,priority:1,score:1,group:"commands",action:{type:"submenu",description:s,providers:[{type:"static",items:[U.from("Light","light"),U.from("Dark","dark"),U.from("Dark dimmed","dark_dimmed")]}],title:s,placeholder:"Choose a theme",iconId:"moon-color-icon-tertiary",path:""},icon:{type:"octicon",id:"moon-color-icon-tertiary"}});if(t.isPresent()){const e=[i].filter((e=>e.title.match(new RegExp(t.text,"i"))));return{results:e}}return{results:[i]}}};ct=t([D],ct);let lt=class PrefetchedProvider extends Provider{constructor(){super(...arguments),this.maxItems=1e3,this.scopedItems={}}get mode(){return this.element.mode}clearCache(){super.clearCache(),this.scopedItems={}}async prefetch(t){if(this.scopedItems[t.scope.id])return;const e=new Query("",this.mode,{subjectId:t.subjectId,subjectType:t.subjectType,returnTo:t.returnTo,scope:t.scope}),s=await this.fetchSrc(e,this.mode);this.octicons=s.octicons||[];const i=s.results||[];this.scopedItems[t.scope.id]=i}async fetch(t,e=!1){const s=this.scopedItems[t.scope.id]||[];if(t.isBlank())return{results:s.slice(0,this.maxItems)};return{results:this.fuzzyFilter(s,t).slice(0,this.maxItems)}}};lt=t([D],lt);let dt=class FilesProvider extends lt{async fetchSrc(t){const e=new URL(this.src,window.location.origin);e.search=t.params().toString();const s=await fetch(e.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),i=await s.json(),o=i.results[0];if(o.base_file_path){const t=o.base_file_path,e=o.paths;i.results=e.map((e=>Z.from({title:e,path:`${t}/${e}`,icon:"file-color-icon-tertiary",group:"files"})))}else o.action&&"access_policy"===o.action.type?i.results=[new at(o)]:i.results=[];return i}async fetch(t,e=!1){const s=t.text.match(/(.+):(\d*)\s*$/);return s?this.fetchWithLineNumbers(t,s):super.fetch(t,e)}async fetchWithLineNumbers(t,e){const s=e[1],i=e[2],o=new Query(s,t.mode,{scope:t.scope}),n=[],r=(await super.fetch(o)).results;for(const a of r)a instanceof Z&&n.push(this.convert(a,i));return{results:n}}convert(t,e){if(""===e)return t;if(!(t instanceof Z))return t;const s=JSON.parse(JSON.stringify(t.data));return s.title=`${s.title}:${e}`,s.action.path=`${s.action.path}#L${e}`,new Z(s)}};dt=t([D],dt);let ht=class SearchLinksProvider extends Provider{async fetch(t,e=!1){return t.isBlank()||"?"===t.mode?{results:[]}:{results:[it.create(t)]}}};var ut;ht=t([D],ht);let pt=ut=class MainWindowCommandItem extends Item{static from(t){return new ut({title:t.title,subtitle:t.subtitle,typeahead:t.title,priority:11,score:1,group:"commands",action:{type:"main_window_command",command:t,path:""},icon:{type:"octicon",id:t.icon},hint:"Run command"})}activate(t){super.activate(t),this.command.run(t),t.clearProviderCaches(),t.dismiss(),t.itemStackElement.clear(),t.commandPaletteInput.value=""}get activateTrackingEventType(){return"command_executed"}isApplicable(t){return this.command.isApplicable(t)}select(){this.command.select()}deselect(){this.command.deselect()}get command(){return this.action.command}get action(){return this.data.action}};pt=ut=t([j],pt);class MainWindowCommand{static get item(){return pt.from(new this)}run(t){}isApplicable(t){return!0}select(){}deselect(){}}var mt=[class DeleteDiscussion extends MainWindowCommand{constructor(){super(...arguments),this.title="Delete discussion…",this.icon="trash-color-icon-tertiary"}fetchDetails(){return document.querySelector("details.js-delete-discussion-details")}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}run(){const t=this.fetchDetails();t&&(t.open=!0,setTimeout((()=>{var e;null===(e=null==t?void 0:t.querySelector('button[type="submit"]'))||void 0===e||e.focus()}),0))}},class TransferDiscussion extends MainWindowCommand{constructor(){super(...arguments),this.title="Transfer discussion…",this.icon="arrow-right-color-icon-tertiary"}fetchDetails(){return document.querySelector("details.js-transfer-discussion-details")}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}run(){var t;const e=this.fetchDetails();if(e){const s=()=>{setTimeout((()=>{var t;null===(t=null==e?void 0:e.querySelector("[data-menu-button]"))||void 0===t||t.focus()}),0)};null===(t=e.querySelector("include-fragment"))||void 0===t||t.addEventListener("load",s),e.open=!0,s()}}},class EditDiscussion extends MainWindowCommand{constructor(){super(...arguments),this.title="Edit discussion body",this.icon="pencil-color-icon-tertiary"}get editButton(){return document.querySelector(".js-discussions-comment-edit-button")}isApplicable(){return null!=this.editButton}run(){var t;null===(t=this.editButton)||void 0===t||t.click()}}];class SwitchToDark extends MainWindowCommand{constructor(){super(...arguments),this.title="Switch theme to default dark",this.icon="moon-color-icon-tertiary",this.mode="dark",this.theme="dark"}select(){this.loadStyles(this.theme)}applyTheme(){this.loadStyles(this.theme),"auto"!==this.mode&&b(this.theme,this.mode),S(this.mode)}async run(){this.applyTheme(),this.saveSettings(this.mode,this.lightTheme,this.darkTheme)}async saveSettings(t=this.mode,e,s){const i=document.querySelector(".js-color-mode-csrf").value,o=document.querySelector(".js-color-mode-path").value,n=new FormData;n.set("color_mode",t),e&&n.set("light_theme",e),s&&n.set("dark_theme",s);const r=await fetch(o,{method:"PUT",body:n,mode:"same-origin",headers:{"Scoped-CSRF-Token":i,"X-Requested-With":"XMLHttpRequest"}}),a=await r.json();this.loadStyles(a.light_theme),this.loadStyles(a.dark_theme),b(a.light_theme,"light"),b(a.dark_theme,"dark"),S(a.color_mode)}loadStyles(t){const e=document.querySelector(`link[data-color-theme='${t}']`);e&&e.hasAttribute("data-href")&&!e.hasAttribute("href")&&e.setAttribute("href",e.getAttribute("data-href"))}get darkTheme(){return"dark"===this.mode?this.theme:g("dark")}get lightTheme(){return"light"===this.mode?this.theme:g("light")}}var yt=[class OpenInDotDev extends MainWindowCommand{constructor(){super(...arguments),this.title="Open in github.dev editor",this.icon="codespaces-color-icon-tertiary"}isApplicable(){return this.fetchLink()instanceof HTMLAnchorElement}fetchLink(){return document.querySelector(".js-github-dev-shortcut")}run(){var t;null===(t=this.fetchLink())||void 0===t||t.click()}},class SwitchToLight extends SwitchToDark{constructor(){super(...arguments),this.title="Switch theme to default light",this.icon="sun-color-icon-tertiary",this.mode="light",this.theme="light"}},SwitchToDark,class SwitchToDarkDimmed extends SwitchToDark{constructor(){super(...arguments),this.title="Switch theme to dark dimmed",this.theme="dark_dimmed"}},class SwitchToDarkHighConstrast extends SwitchToDark{constructor(){super(...arguments),this.title="Switch theme to dark high contrast",this.theme="dark_high_contrast"}},class SwitchToAuto extends SwitchToDark{constructor(){super(...arguments),this.title="Switch theme settings to sync with system",this.icon="sun-color-icon-tertiary",this.mode="auto"}get darkTheme(){}get lightTheme(){}},class UpdateSubscription extends MainWindowCommand{constructor(){super();const t=this.isSubscribe();this.title=""+(t?"Subscribe":"Unsubscribe"),this.icon=(t?"bell":"bell-slash")+"-color-icon-tertiary"}isApplicable(){var t;return this.fetchButton()instanceof HTMLButtonElement&&!1===(null===(t=this.fetchButton())||void 0===t?void 0:t.disabled)}isSubscribe(){var t,e;return"Subscribe"===(null===(e=null===(t=this.fetchButton())||void 0===t?void 0:t.textContent)||void 0===e?void 0:e.trim())}fetchButton(){return document.querySelector(".thread-subscribe-button")}run(){var t;null===(t=this.fetchButton())||void 0===t||t.click()}}];class EditIssueBody extends MainWindowCommand{constructor(){super(...arguments),this.title="Edit issue body",this.icon="pencil-color-icon-tertiary"}run(){const t=document.createElement("button");t.hidden=!0,t.classList.add("js-comment-edit-button");const e=document.querySelector("div.js-comment");null==e||e.appendChild(t),t.click(),t.remove(),setTimeout((()=>{var t,s;null===(s=null===(t=null==e?void 0:e.parentElement)||void 0===t?void 0:t.querySelector("textarea.js-comment-field"))||void 0===s||s.focus()}),0)}}class EditIssueTitle extends MainWindowCommand{constructor(){super(...arguments),this.title="Edit issue title",this.icon="pencil-color-icon-tertiary"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-title-edit-button")}run(){var t;null===(t=this.fetchButton())||void 0===t||t.click(),setTimeout((()=>{var t;null===(t=document.querySelector("input#issue_title[autofocus]"))||void 0===t||t.focus()}),0)}}var vt=[EditIssueTitle,EditIssueBody,class LockIssue extends MainWindowCommand{constructor(){super();const t=this.isLock();this.title=(t?"Lock":"Unlock")+" issue",this.icon=(t?"lock":"key")+"-color-icon-tertiary"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}isLock(){var t,e;return"Lock conversation"===(null===(e=null===(t=document.querySelector("summary.lock-toggle-link"))||void 0===t?void 0:t.textContent)||void 0===e?void 0:e.trim())}fetchDetails(){return document.querySelector("details.js-lock-issue")}run(){const t=this.fetchDetails();t&&(t.open=!0,setTimeout((()=>{var t;null===(t=document.querySelector("#unlock-reason"))||void 0===t||t.focus()}),0))}},class TransferIssue extends MainWindowCommand{constructor(){super(...arguments),this.title="Transfer issue…",this.icon="arrow-right-color-icon-tertiary"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-transfer-issue")}run(){var t;const e=this.fetchDetails();if(e){const s=()=>{setTimeout((()=>{var t;null===(t=e.querySelector("[data-menu-button]"))||void 0===t||t.focus()}),0)};null===(t=e.querySelector("include-fragment"))||void 0===t||t.addEventListener("load",s),e.open=!0,s()}}},class DeleteIssue extends MainWindowCommand{constructor(){super(...arguments),this.title="Delete issue…",this.icon="trash-color-icon-tertiary"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-delete-issue")}run(){const t=this.fetchDetails();t&&(t.open=!0,setTimeout((()=>{var e;null===(e=t.querySelector('button[type="submit"]'))||void 0===e||e.focus()}),0))}},class ConvertToDiscussion extends MainWindowCommand{constructor(){super(...arguments),this.title="Convert issue to discussion…",this.icon="comment-discussion-color-icon-tertiary"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-convert-to-discussion")}run(){var t;const e=this.fetchDetails();if(e){const s=()=>{setTimeout((()=>{var t;null===(t=e.querySelector("[data-menu-button]"))||void 0===t||t.focus()}),0)};null===(t=e.querySelector("include-fragment"))||void 0===t||t.addEventListener("load",s),e.open=!0,s()}}}];class OpenCodespace extends MainWindowCommand{constructor(){super(...arguments),this.title="Open in new codespace",this.icon="codespaces-color-icon-tertiary"}isApplicable(){const t=this.fetchElements();return!!(t.codeModal&&t.codespacesForm&&t.newCodespacesButton&&t.codespacesTab)}run(){const{codeModal:t,codespacesTab:e,newCodespacesButton:s}=this.fetchElements();t&&e&&s&&(t.open=!0,e.click(),s instanceof HTMLButtonElement?s.click():(s.parentElement.open=!0,setTimeout((()=>{var t;null===(t=document.querySelector(".js-create-codespace-with-sku-button"))||void 0===t||t.focus()}),0)))}fetchElements(){const t=document.querySelector(".js-create-codespaces-form-command"),e=(null==t?void 0:t.closest("details"))||null,s=(null==e?void 0:e.querySelector('[data-tab="cloud"]'))||null,i=(null==t?void 0:t.querySelector('summary[role="button"], button[type="submit"]'))||null;return{codespacesForm:t,codeModal:e,codespacesTab:s,newCodespacesButton:i}}}var ft=[class CopyBranchName extends MainWindowCommand{constructor(){super(...arguments),this.title="Copy current branch name",this.icon="copy-color-icon-tertiary"}isApplicable(){return this.fetchClipboardCopy()instanceof d}fetchClipboardCopy(){return document.querySelector(".js-copy-branch")}async run(t){const e=this.fetchClipboardCopy();if(e instanceof d){const i=e.value;try{await f(i),t.displayFlash("success","Branch name copied to clipboard!")}catch(s){t.displayFlash("error","Unable to copy branch name to clipboard!")}}}},class EditPullRequestTitle extends EditIssueTitle{constructor(){super(...arguments),this.title="Edit pull request title"}},class EditPullRequestBody extends EditIssueBody{constructor(){super(...arguments),this.title="Edit pull request body"}},class UpdateBranch extends MainWindowCommand{constructor(){super(...arguments),this.title="Update current branch",this.icon="sync-color-icon-tertiary"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-update-branch-form button")}run(){const t=this.fetchButton();t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.click())}},class ConvertToDraft extends MainWindowCommand{constructor(){super(...arguments),this.title="Convert to draft",this.icon="git-pull-request-draft-color-text-tertiary"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-convert-to-draft")}run(){var t;const e=null===(t=this.fetchButton())||void 0===t?void 0:t.closest("details");e&&(e.open=!0,setTimeout((()=>{var t;null===(t=e.querySelector(".js-convert-to-draft"))||void 0===t||t.focus()}),0))}},OpenCodespace];var gt=[class CloneCopyHttps extends MainWindowCommand{constructor(){super(...arguments),this.title="Clone repository: Copy HTTPS",this.icon="copy-color-icon-tertiary"}isApplicable(){return this.fetchClipboardCopy()instanceof d}fetchClipboardCopy(){return document.querySelector(".js-clone-url-http")}async run(t){const e=this.fetchClipboardCopy();if(e instanceof d){const i=e.value;try{await f(i),t.displayFlash("success","Clone URL copied!")}catch(s){t.displayFlash("error","Clone URL couldn't be copied")}}}},class CloneCopySsh extends MainWindowCommand{constructor(){super(...arguments),this.title="Clone repository: Copy SSH",this.icon="copy-color-icon-tertiary"}isApplicable(){return this.fetchClipboardCopy()instanceof d}fetchClipboardCopy(){return document.querySelector(".js-clone-url-ssh")}async run(t){const e=this.fetchClipboardCopy();if(e instanceof d){const i=e.value;try{await f(i),t.displayFlash("success","Clone URL copied!")}catch(s){t.displayFlash("error","Clone URL couldn't be copied")}}}},class CloneCopyCli extends MainWindowCommand{constructor(){super(...arguments),this.title="Clone repository: Copy GitHub CLI",this.icon="copy-color-icon-tertiary"}isApplicable(){return this.fetchClipboardCopy()instanceof d}fetchClipboardCopy(){return document.querySelector(".js-clone-url-gh-cli")}async run(t){const e=this.fetchClipboardCopy();if(e instanceof d){const i=e.value;try{await f(i),t.displayFlash("success","Clone URL copied!")}catch(s){t.displayFlash("error","Clone URL couldn't be copied")}}}},class CopyPermalink extends MainWindowCommand{constructor(){super(...arguments),this.title="Copy file permalink",this.icon="copy-color-icon-tertiary"}isApplicable(){return this.fetchPermalinkContainer()instanceof HTMLAnchorElement}fetchPermalinkContainer(){return document.querySelector(".js-permalink-shortcut")}async run(t){const e=this.fetchPermalinkContainer();if(e){const i=`${e.href}${window.location.hash}`;try{await f(i),t.displayFlash("success","Copied permalink!")}catch(s){t.displayFlash("error","Failed to copy permalink!")}}}},OpenCodespace];let bt=class MainWindowCommandsProvider extends Provider{constructor(){super(...arguments),this.itemsByType={},this.everywhereItems=[],this.needsFetch=!0}async fetch(t,e=!1){var s;this.loadCommandItems();const i=this.itemsForSubjectType(null!==(s=t.subjectType)&&void 0!==s?s:""),o=(t.isBlank()?i:this.fuzzyFilter(i,t)).filter((e=>e.isApplicable(t)));return{results:o}}itemsForSubjectType(t){var e;return[...null!==(e=this.itemsByType[t])&&void 0!==e?e:[],...this.everywhereItems]}loadCommandItems(){this.needsFetch&&(this.itemsByType={Issue:vt.map((t=>t.item)),PullRequest:ft.map((t=>t.item)),Repository:gt.map((t=>t.item)),Discussion:mt.map((t=>t.item))},this.everywhereItems=yt.map((t=>t.item)),this.needsFetch=!1)}clearCache(){this.needsFetch=!0}};var St;bt=t([D],bt);let Tt=St=class DisabledItem extends Item{static from(t,e){return new St({title:t,typeahead:"",priority:1,score:1,group:"commands",hint:n`<span><span class="mr-2">🚀</span>Coming soon!</span>`,action:{type:"disabled_item",path:""},icon:{type:"octicon",id:e}})}render(){const t=super.render(!1,"");return t.titleElement.classList.remove("color-text-primary"),t.titleElement.classList.add("color-text-tertiary"),t}select(t){t.containerElement.classList.remove("color-bg-tertiary"),t.hintText.hidden=!1}get action(){return{}}get key(){return`${super.key}/${this.data.title}`}};Tt=St=t([j],Tt);let It=class TeaserCommandsProvider extends Provider{async prefetch(){}async fetch(){return{results:[Tt.from("Switch theme","sun-color-icon-tertiary"),Tt.from("Switch account","person-color-icon-tertiary"),Tt.from("Create issue","issue-opened-color-icon-tertiary")]}}};It=t([D],It);let xt=class RemoteProvider extends Provider{async fetch(t,e=!1){return this.fetchSrc(t)}};xt=t([D],xt);let Et=class HelpProvider extends Provider{async fetch(t,e=!1){if("?"===t.mode||e){return{results:Array.from(this.element.querySelectorAll("command-palette-help")).filter((e=>e.show(t))).map(((t,e)=>t.toItem(e)))}}return{results:[]}}};Et=t([D],Et);let kt=class CommandPaletteInputElement extends HTMLElement{constructor(){super(...arguments),this.setupComplete=!1,this.connected=!1}static get observedAttributes(){return["value","typeahead","scope"]}setup(){this.classList.add("d-flex","flex-items-center","flex-nowrap","py-1","pl-3","pr-2","border-bottom"),this._renderElement(),this.onInputBound=this.onInput.bind(this),this.onKeydownBound=this.onKeydown.bind(this),this.onClearBound=this.onClear.bind(this);const t=this.querySelector("command-palette-scope");t?this.scopeElement=t:(this.scopeElement=new k,this.scopeElement.hidden=!0,this.prepend(this.scopeElement)),this.defaultScope=this.scope,this.input=this.querySelector("input.js-input"),this.overlayInput=this.querySelector("input.js-overlay-input"),this.clearButton=this.querySelector(".js-clear"),this.submenuTile=this.querySelector(".js-submenu-tile"),this.submenuBack=this.querySelector(".js-submenu-back"),this.spinner=this.querySelector(".js-spinner"),this.hasAttribute("autofocus")&&this.input.focus(),this.input.addEventListener("input",this.onInputBound),this.input.addEventListener("keydown",this.onKeydownBound),this.clearButton.addEventListener("click",this.onClearBound),this.clearButton.addEventListener("keydown",(t=>{"Enter"===t.key&&this.onClearBound(t)})),this.spinner.hidden=!0,this.clearButton.hidden=!0,this.submenuBack.addEventListener("keydown",(t=>{"Enter"===t.key&&(this._dispatchEvent("command-palette-submenu-back"),t.preventDefault(),t.stopPropagation())})),this.submenuBack.addEventListener("click",(t=>{this._dispatchEvent("command-palette-submenu-back"),t.preventDefault(),t.stopPropagation()})),this.scopeElement.addEventListener("click",(()=>{this._dispatchEvent("command-palette-descope")})),0!==this.value.length&&this._dispatchEvent("command-palette-input"),this.setupComplete=!0}connectedCallback(){this.setupComplete||this.setup(),this.value=this.getAttribute("value")||"",this.typeahead=this.getAttribute("typeahead")||"",this.placeholder=this.getAttribute("placeholder")||"",this.connected=!0}attributeChangedCallback(t,e,s){this.input&&("typeahead"===t?this.typeahead=s:"value"===t&&(this.value=s,this._dispatchEvent("command-palette-input")))}focus(){this.input.focus()}setRemovedTokenAndSelect(t){this.value=t||this.scopeElement.lastRemovedToken.value,this.focus(),this.input.select()}get scope(){return this.scopeElement.scope}set scope(t){this.scopeElement.scope=t}hasScope(){return this.scopeElement.hasScope()}clearScope(){return this.scopeElement.clearScope()}removeToken(){return this.scopeElement.removeToken()}get placeholder(){return this.input.getAttribute("placeholder")||""}set placeholder(t){this.input.setAttribute("placeholder",t)}get typeaheadPlaceholder(){var t;return(null===(t=h(this,"typeaheadPlaceholder"))||void 0===t?void 0:t.textContent)||""}set typeaheadPlaceholder(t){h(this,"typeaheadPlaceholder").textContent=t}get value(){var t;return(null===(t=this.input)||void 0===t?void 0:t.value)||""}set value(t){this.input.value=t,this.typeahead=t,this.resetPlaceholder(),this.onInput()}get overlay(){return this.overlayInput.value}set overlay(t){this.overlayInput.value=t}set mirror(t){h(this,"mirror").textContent=t}get typeaheadText(){return h(this,"typeaheadText").textContent||""}set typeaheadText(t){h(this,"typeaheadText").textContent=t}get typeahead(){return this.typeaheadValue}set typeahead(t){if(this.typeaheadValue=this.overlay+t,this.mirror=this.value,""===t)this.typeaheadText="";else if(this.placeholder="",this.typeaheadPlaceholder="",this.valueStartsWithTypeahead){const e=this.value.length-(this.overlay?1:0);this.typeaheadText=t.substring(e)}else this.typeaheadText=` – ${t}`}showModePlaceholder(t=""){this.typeaheadPlaceholder=t}get valueStartsWithTypeahead(){return this.typeaheadValue.toLowerCase().startsWith(this.value.toLowerCase())}get isCursorAtEnd(){return this.value.length===this.input.selectionStart}set loading(t){this.spinner.hidden=!t}resetScopeIfNeeded(){""===this.value&&this.scope.id!==this.defaultScope.id&&(this.scope=this.defaultScope)}resetPlaceholder(){this.value.replace(this.overlay,"")&&this.overlay&&(this.typeaheadPlaceholder=""),this.placeholder=this.getAttribute("placeholder")||""}onInput(){this.resetPlaceholder(),this.clearButton.hidden=!this.hasSomethingToClear(),this.connected&&this._dispatchEvent("command-palette-input")}onClear(){this.value="",this.input.focus(),this._dispatchEvent("command-palette-cleared")}onKeydown(t){if(this.isSelectKeystroke(t.key)&&(this._dispatchEvent("command-palette-select"),t.stopImmediatePropagation(),t.preventDefault()),0===this.input.selectionStart&&0===this.input.selectionEnd&&this.hasScope()&&"Backspace"===t.key)return this._dispatchEvent("command-palette-descope"),t.stopImmediatePropagation(),void t.preventDefault()}hasSomethingToClear(){return this.scopeElement.hasScope()||this.value.length>0}isSelectKeystroke(t){return"Tab"===t||"ArrowRight"===t&&this.isCursorAtEnd}textSelected(){return this.input.selectionStart!==this.input.selectionEnd}setSubmenuTile(t,e){var s;if(this.hasSubmenuTile()?null===(s=this.submenuTile.querySelector("svg"))||void 0===s||s.remove():(this.submenuBack.hidden=!1,this.submenuTile.hidden=!1,this.submenuTile.classList.remove("anim-fade-down"),this.submenuTile.classList.add("anim-fade-up")),this.submenuTile.querySelector(".js-submenu-tile-title").textContent=t,e){const t=document.createElement("div");t.innerHTML=e,this.submenuTile.prepend(t.children[0])}}clearSubmenuTile(){this.submenuTile.classList.remove("anim-fade-up"),this.submenuTile.classList.add("anim-fade-down"),this.submenuBack.hidden=!0,setTimeout((()=>{var t;this.submenuTile.hidden=!0,null===(t=this.submenuTile.querySelector("svg"))||void 0===t||t.remove()}),300)}hasSubmenuTile(){return!(this.submenuBack.hidden&&this.submenuTile.hidden)}_dispatchEvent(t){const e=new CustomEvent(t,{cancelable:!0,detail:{typeahead:this.typeahead,value:this.value}});return this.dispatchEvent(e)}_renderElement(){o(n`
        <div
          class="js-submenu-tile anim-fade-up position-absolute px-2 py-2 pr-3 f6 text-semibold color-text-primary color-bg-primary rounded-3 border d-flex flex-items-center"
          style="z-index: -100; top: -40px; left: 0; animation-delay: 0s"
          hidden
        >
          <span class="js-submenu-tile-title ml-1"></span>
        </div>
        <div
          class="js-submenu-back border circle p-1 mr-1 cursor-pointer flex-self-center"
          style="height: 26px"
          tabindex="0"
          hidden
        >
          <svg
            class="octicon color-icon-primary v-align-baseline"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 16 16"
            width="16"
            height="16"
          >
            <path
              fill-rule="evenodd"
              d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"
            ></path>
          </svg>
        </div>
        <div class="command-palette-input-group flex-1 form-control border-0 box-shadow-none" style="z-index: 0">
          <div class="command-palette-typeahead position-absolute d-flex flex-items-center">
            <span class="typeahead-segment input-mirror" data-target="command-palette-input.mirror"></span>
            <span class="typeahead-segment" data-target="command-palette-input.typeaheadText"></span>
            <span class="typeahead-segment" data-target="command-palette-input.typeaheadPlaceholder"></span>
          </div>
          <input
            class="js-overlay-input color-text-secondary typeahead-input form-control border-0 box-shadow-none input-block width-full position-absolute"
            style="background-color: transparent; pointer-events: none; padding: inherit;"
            disabled
            tabindex="-1"
            aria-label="Color overlay"
          />
          <input
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            class="js-input typeahead-input form-control border-0 box-shadow-none input-block width-full"
            aria-label="Command palette input"
          />
        </div>
        <div class="js-spinner d-flex flex-items-center px-2 color-text-secondary">
          <svg class="anim-rotate" viewBox="0 0 16 16" fill="none" width="16" height="16">
            <circle
              cx="8"
              cy="8"
              r="7"
              stroke="currentColor"
              stroke-opacity="0.25"
              stroke-width="2"
              vector-effect="non-scaling-stroke"
            ></circle>
            <path
              d="M15 8a7.002 7.002 0 00-7-7"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              vector-effect="non-scaling-stroke"
            ></path>
          </svg>
        </div>
        <button class="js-clear btn-link color-text-tertiary no-underline px-2" role="button" tabindex="0">
          Clear
        </button>
      `,this)}};function wt(t){if(J(t)&&("k"===t.key.toLowerCase()||"˚"===t.key)){if(document.querySelector("#memex-root"))return;if(!t.shiftKey&&!t.altKey&&function(t){return function(t){const e=t.target;return!!e&&null!==e.closest(".js-previewable-comment-form")}(t)||function(t){const e=t.target;if(!e)return!1;const s=e.closest(".js-code-editor");if(!s)return!1;const i=v(s);if(!i)return!1;const o=i.editor;if(!o)return!1;const n=o.getMode().name;return"gfm"===n||"markdown"===n}(t)}(t))return;!function(t){for(const e of document.querySelectorAll(".js-command-palette-dialog")){const s=e.querySelector(kt.tagName);if(!s)return;if(e.open)e.open=!1;else{Ct(s,t);const i=e.querySelector(Y.tagName);i&&(i.previouslyActiveElement=document.activeElement),e.open=!0}}}(t.shiftKey),t.preventDefault(),t.stopPropagation()}}function Ct(t,e){const s=t.value.startsWith(">");return e&&!s?(t.value=`>${t.value}`,!0):!(e||!s)&&(t.value=t.value.substring(1),!0)}kt.tagName="command-palette-input",kt=t([s],kt),window.customElements.get(Y.tagName)||window.customElements.define(Y.tagName,Y),function(){let t=!1;for(const e of document.querySelectorAll(".js-command-palette-dialog"))t=!0,e.addEventListener("toggle",(()=>{const t=e.querySelector(Y.tagName);t&&(e.open?t.activate():t.deactivate())}));t&&document.addEventListener("keydown",wt)}()}}}));
//# sourceMappingURL=command-palette-d58bdf83.js.map
